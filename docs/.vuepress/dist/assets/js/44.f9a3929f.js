(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{406:function(t,s,a){"use strict";a.r(s);var n=a(44),v=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),a("p",[t._v("어떤 기술을 "),a("code",[t._v("왜")]),t._v(" 쓰는지 알면, "),a("code",[t._v("무엇을")]),t._v(" "),a("code",[t._v("언제")]),t._v(" 기술을 사용하는지를 알 게")]),t._v(" "),a("h2",{attrs:{id:"nginx란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx란"}},[t._v("#")]),t._v(" Nginx란")]),t._v(" "),a("ul",[a("li",[t._v("웹서버")])]),t._v(" "),a("h3",{attrs:{id:"웹서버-vs-was-웹-어플리케이션-서버"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#웹서버-vs-was-웹-어플리케이션-서버"}},[t._v("#")]),t._v(" 웹서버 VS WAS(웹 어플리케이션 서버)")]),t._v(" "),a("ol",[a("li",[t._v("웹서버는 "),a("code",[t._v("정적")]),t._v(" 파일을 응답한다")]),t._v(" "),a("li",[t._v("WAS는 클라이언트 요청에 대해 동적처리를 한 후 응답")])]),t._v(" "),a("h2",{attrs:{id:"nginx를-사용하는-이유"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx를-사용하는-이유"}},[t._v("#")]),t._v(" Nginx를 사용하는 이유")]),t._v(" "),a("ol",[a("li",[t._v("WAS의 부담을 덜어주기 위해")])]),t._v(" "),a("p",[t._v("ex) 사용자가 이미지 파일을 요청하면?")]),t._v(" "),a("ul",[a("li",[t._v("WAS가 처리해줄 수 도 있지만, 과부하를 덜어주기 위해 웹서버에서 처리")])]),t._v(" "),a("h3",{attrs:{id:"굳이-nginx를-사용하는-이유"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#굳이-nginx를-사용하는-이유"}},[t._v("#")]),t._v(" 굳이 Nginx를 사용하는 이유")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("빠르다")])]),t._v(" "),a("li",[a("p",[t._v("효울적인 메모리 사용")])]),t._v(" "),a("li",[a("p",[t._v("리버스 프록시로 사용 가능")]),t._v(" "),a("ul",[a("li",[t._v("로드 밸런싱 가능")]),t._v(" "),a("li",[t._v("캐싱 가능")]),t._v(" "),a("li",[t._v("보안 효과")])])]),t._v(" "),a("li",[a("p",[t._v("SSL 지원")]),t._v(" "),a("ul",[a("li",[t._v("보안 인증서")]),t._v(" "),a("li",[t._v("https 인증서를 제공해줄 수 있음")])])]),t._v(" "),a("li",[a("p",[t._v("웹페이지 접근을 인증 해 줄 수 있음")]),t._v(" "),a("ul",[a("li",[t._v("user, 관리자를 판별")])])]),t._v(" "),a("li",[a("p",[t._v("압축")]),t._v(" "),a("ul",[a("li",[t._v("클라이언트의 요청이 text인 경우 압축 가능")])])]),t._v(" "),a("li",[a("p",[t._v("비동기처리 가능")]),t._v(" "),a("ul",[a("li",[t._v("이벤트루프 방식 사용")]),t._v(" "),a("li",[t._v("많은 트래픽을 동시에 처리할 수 있다.")])])])]),t._v(" "),a("h2",{attrs:{id:"nginx도-비동기-nodejs도-비동기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx도-비동기-nodejs도-비동기"}},[t._v("#")]),t._v(" Nginx도 비동기 NodeJS도 비동기")]),t._v(" "),a("ul",[a("li",[t._v("Nginx를 앞단에, NodeJS를 뒷단에 두면 "),a("code",[t._v("버퍼오버플로우")]),t._v(" 취약점에 대한 공격을 방지 할 수 있음")])]),t._v(" "),a("h2",{attrs:{id:"구축하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#구축하기"}},[t._v("#")]),t._v(" 구축하기")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("클라이언트가 HTTP로 접속을 하면 80번 포트로 접속이 됨")]),t._v(" "),a("ul",[a("li",[t._v("국룰")])])]),t._v(" "),a("li",[a("p",[t._v("HTTPS로 접속을 하면 443번 포트로 접속을 함")])]),t._v(" "),a("li",[a("p",[t._v("Nginx로 80번포트를 받아 443번 포트로 redirect해줌")])]),t._v(" "),a("li",[a("p",[t._v("Nginx를 설치하면 설정파일이 생기고, 설정파일을 수정해줘야함")])])]),t._v(" "),a("h3",{attrs:{id:"어떤-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#어떤-설정"}},[t._v("#")]),t._v(" 어떤 설정?")]),t._v(" "),a("ol",[a("li",[t._v("HTTP 80번포트로 들어오면 HTTPS 443번 포트로 우회시키기")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    liten "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    if"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v(" https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$requset_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("ul",[a("li",[t._v("$host는 클라이언트의 주소")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("443번 포트 처리")])]),t._v(" "),a("ul",[a("li",[t._v("SSL인증서 사용")]),t._v(" "),a("li",[t._v("5000번 포트로 우회")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("sever"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        proxy_pass http://127.0.0.1:5000\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=v.exports}}]);