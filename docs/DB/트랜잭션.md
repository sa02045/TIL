# 트랜잭션

- 데이터베이스의 상태를 변화시키는 작업의 단위

- 안정성을 확보하기 위한 단위
- 만약 도중에 작업이 실패한 경우, 오류를 원상태로 되돌려서 안정성을 보장할 수 있음

예)
A사용자가 B사용자에게 송금을 할때, A사용자의 계좌에서 금액을 Update하고, B사용자의 계좌에서 금액을 Update해야된다.
두번의 Update를 하는 작업을 트랜잭션이라고 볼 수 있다.

- 만약 두번의 Update중 한번의 Update가 오류를 발생한다면 Rollback을 통해 모든 작업을 이전상태로 되돌릴 수 있다

# ACID

- 트랜잭션은 다음 4가지 특성을 만족시킴으로서 데이터베이스의 안정성을 보장한다.

1. Atomicity (원자성)
   - 트랜잭션은 DB에 모두 반영되거나, 하나도 반영되지 않아야한다.
2. Consistency (일관성)
   - 트랜잭션의 결과는 일관성을 유지해야한다.
3. Isolation (격리성)
   - 둘 이상의 트랜잭션이 동시에 병렬로 실행되어도, 서로 독립적으로 순차적으로 실행되어야 한다. 트랜잭션이 다른 트랜잭션이 영향을 주면 안됨
   - Locking을 통해 다른 트랜잭션이 관여하지 못하도록 한다
4. Durability (지속성
   - 트랜잭션이 성공적으로 완료되었으면 결과는 영구적으로 반영되야함

## 상태

![](https://k.kakaocdn.net/dn/PDxus/btqB2uxivzk/ERRntkdAzfbibpUlXmtohK/img.png)

1. Active : 트랜잭션이 실행중인 상태
2. Failed : 오류가 발생하여 중단된 상태
3. Aborted : 종료되어 Rollback연산을 수행하여 되돌린 상태
4. Partially Commited : Commit연산이 실행되기 전까지 트랜잭션 연산이 실행된 상태
5. Commited: 성공적으로 Commit연산이 실행한 상태
